<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A modern habit and daily task tracker with time blocks, streaks, and analytics">
    <title>Habit & Task Tracker</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fa-solid fa-check-double"></i>
                <span>Habit Tracker</span>
            </div>
            <div class="nav-links">
                <button class="nav-btn active" data-view="dashboard">
                    <i class="fa-solid fa-home"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-btn" data-view="habits">
                    <i class="fa-solid fa-star"></i>
                    <span>Habits</span>
                </button>
                <button class="nav-btn" data-view="analytics">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Analytics</span>
                </button>
                <button class="nav-btn" data-view="goals">
                    <i class="fa-solid fa-bullseye"></i>
                    <span>Goals</span>
                </button>
                <button class="nav-btn" data-view="events">
                    <i class="fa-solid fa-calendar-days"></i>
                    <span>Events</span>
                </button>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <i class="fa-solid fa-moon"></i>
            </button>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Dashboard View -->
        <section class="view active" id="dashboard">
            <!-- Motivational Quote -->
            <div class="quote-container">
                <i class="fa-solid fa-quote-left"></i>
                <p id="motivationalQuote" class="quote-text">Loading quote...</p>
                <button id="refreshQuoteBtn" class="quote-refresh-btn" title="Get new quote">
                    <i class="fa-solid fa-rotate"></i>
                </button>
            </div>

            <div class="view-header">
                <h1>Today's Tasks</h1>
                <button class="btn btn-primary" id="addTaskBtn">
                    <i class="fa-solid fa-plus"></i>
                    Add Task
                </button>
            </div>

            <!-- Filter Buttons -->
            <div class="filter-container">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="IAP">
                    <span class="priority-badge priority-iap"></span>
                    Important & Urgent
                </button>
                <button class="filter-btn" data-filter="IBNU">
                    <span class="priority-badge priority-ibnu"></span>
                    Important Not Urgent
                </button>
                <button class="filter-btn" data-filter="NIBU">
                    <span class="priority-badge priority-nibu"></span>
                    Not Important Urgent
                </button>
                <button class="filter-btn" data-filter="NINU">
                    <span class="priority-badge priority-ninu"></span>
                    Not Important Not Urgent
                </button>
            </div>

            <!-- Time Blocks -->
            <div class="time-blocks">
                <!-- Morning Block -->
                <div class="time-block">
                    <div class="block-header">
                        <i class="fa-solid fa-sun"></i>
                        <h2>Morning</h2>
                        <span class="time-range">1:00 AM - 12:00 PM</span>
                    </div>
                    <div class="task-list" id="morningTasks">
                        <!-- Tasks will be inserted here -->
                    </div>
                </div>

                <!-- Evening Block -->
                <div class="time-block">
                    <div class="block-header">
                        <i class="fa-solid fa-cloud-sun"></i>
                        <h2>Evening</h2>
                        <span class="time-range">12:00 PM - 6:00 PM</span>
                    </div>
                    <div class="task-list" id="eveningTasks">
                        <!-- Tasks will be inserted here -->
                    </div>
                </div>

                <!-- Night Block -->
                <div class="time-block">
                    <div class="block-header">
                        <i class="fa-solid fa-moon"></i>
                        <h2>Night</h2>
                        <span class="time-range">6:00 PM - 12:00 AM</span>
                    </div>
                    <div class="task-list" id="nightTasks">
                        <!-- Tasks will be inserted here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Habits View -->
        <section class="view" id="habits">
            <div class="view-header">
                <h1>My Habits</h1>
                <button class="btn btn-primary" id="addHabitBtn">
                    <i class="fa-solid fa-plus"></i>
                    Add Habit
                </button>
            </div>
            <div class="habits-grid" id="habitsGrid">
                <!-- Habit cards will be inserted here -->
            </div>
        </section>

        <!-- Analytics View -->
        <section class="view" id="analytics">
            <div class="view-header">
                <h1>Analytics</h1>
            </div>

            <h2 style="margin-bottom: 1rem; font-size: 1.25rem; color: var(--text-primary);">Task Completion</h2>
            <div class="analytics-container">
                <div class="chart-card">
                    <h3>Weekly Completion Rate</h3>
                    <canvas id="weeklyChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Monthly Completion Trend</h3>
                    <canvas id="monthlyChart"></canvas>
                </div>
            </div>

            <!-- Goals Achievement -->
            <h2 style="margin: 2.5rem 0 1rem 0; font-size: 1.25rem; color: var(--text-primary);">Goal Achievement</h2>
            <div class="analytics-container">
                <div class="chart-card">
                    <h3>Goal Completion Rate</h3>
                    <canvas id="goalsChart"></canvas>
                </div>
            </div>

            <!-- Individual Habit Graphs -->
            <h2 style="margin: 2.5rem 0 1rem 0; font-size: 1.25rem; color: var(--text-primary);">Habit Completion
                Patterns</h2>
            <div id="habitChartsContainer"></div>
        </section>

        <!-- Events View -->
        <section class="view" id="events">
            <div class="view-header">
                <h1>Scheduled Events</h1>
                <button class="btn btn-primary" id="addEventBtn">
                    <i class="fa-solid fa-plus"></i>
                    Add Event
                </button>
            </div>
            <div class="events-list" id="eventsList">
                <!-- Event cards will be inserted here -->
            </div>
        </section>

        <!-- Goals View -->
        <section class="view" id="goals">
            <div class="view-header">
                <h1>My Goals</h1>
                <button class="btn btn-primary" id="addGoalBtn">
                    <i class="fa-solid fa-plus"></i>
                    Add Goal
                </button>
            </div>
            <div class="goals-list" id="goalsList">
                <!-- Goal cards will be inserted here -->
            </div>
        </section>
    </main>

    <!-- Right Side Panel (Timer) -->
    <aside class="side-panel" id="timerPanel">
        <div class="panel-header">
            <h2>Focus Timer</h2>
            <button class="close-panel" id="closePanelBtn">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="panel-content">
            <div class="task-info" id="timerTaskInfo">
                <!-- Task details will be shown here -->
            </div>
            <div class="timer-display" id="timerDisplay">00:00:00</div>
            <div class="timer-controls">
                <button class="btn btn-success" id="startTimerBtn">
                    <i class="fa-solid fa-play"></i>
                    Start
                </button>
                <button class="btn btn-warning" id="pauseTimerBtn" style="display: none;">
                    <i class="fa-solid fa-pause"></i>
                    Pause
                </button>
                <button class="btn btn-secondary" id="resetTimerBtn">
                    <i class="fa-solid fa-rotate-left"></i>
                    Reset
                </button>
                <button class="btn btn-info" id="breakTimerBtn">
                    <i class="fa-solid fa-coffee"></i>
                    Take Break
                </button>
            </div>
        </div>
    </aside>

    <!-- Modal for Add/Edit Task -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="taskModalTitle">Add New Task</h2>
                <button class="close-modal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">Task Title*</label>
                    <input type="text" id="taskTitle" required>
                </div>
                <div class="form-group">
                    <label for="taskBlock">Time Block*</label>
                    <select id="taskBlock" required>
                        <option value="morning">Morning (1:00 AM - 12:00 PM)</option>
                        <option value="evening">Evening (12:00 PM - 6:00 PM)</option>
                        <option value="night">Night (6:00 PM - 12:00 AM)</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskHours">Hours</label>
                        <input type="number" id="taskHours" min="0" max="23" value="0">
                    </div>
                    <div class="form-group">
                        <label for="taskMinutes">Minutes</label>
                        <input type="number" id="taskMinutes" min="0" max="59" value="30">
                    </div>
                </div>
                <div class="form-group">
                    <label for="taskPriority">Priority*</label>
                    <select id="taskPriority" required>
                        <option value="IAP">Important & Urgent</option>
                        <option value="IBNU">Important but Not Urgent</option>
                        <option value="NIBU">Not Important but Urgent</option>
                        <option value="NINU">Not Important and Not Urgent</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="taskNotes">Notes</label>
                    <textarea id="taskNotes" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Sub-tasks</label>
                    <div id="subtasksList">
                        <!-- Subtasks will be inserted here -->
                    </div>
                    <button type="button" class="btn btn-secondary" id="addSubtaskBtn">
                        <i class="fa-solid fa-plus"></i>
                        Add Sub-task
                    </button>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Add/Edit Habit -->
    <div class="modal" id="habitModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="habitModalTitle">Add New Habit</h2>
                <button class="close-modal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="habitForm">
                <div class="form-group">
                    <label for="habitName">Habit Name*</label>
                    <input type="text" id="habitName" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Habit</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Add Event -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Event</h2>
                <button class="close-modal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="eventForm">
                <div class="form-group">
                    <label for="eventName">Event Name*</label>
                    <input type="text" id="eventName" required>
                </div>
                <div class="form-group">
                    <label for="eventDateTime">Date & Time*</label>
                    <input type="datetime-local" id="eventDateTime" required>
                    <small
                        style="color: var(--text-tertiary); font-size: 0.813rem; margin-top: 0.25rem; display: block;">
                        Click the calendar icon to select a date, or type in format: YYYY-MM-DD HH:MM
                    </small>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Event</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Break Timer -->
    <div class="modal" id="breakModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Set Break Time</h2>
                <button class="close-modal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="breakForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="breakMinutes">Minutes</label>
                        <input type="number" id="breakMinutes" min="1" max="60" value="5" required>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Start Break</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Add/Edit Goal -->
    <div class="modal" id="goalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="goalModalTitle">Add New Goal</h2>
                <button class="close-modal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="goalForm">
                <div class="form-group">
                    <label for="goalTitle">Goal Title*</label>
                    <input type="text" id="goalTitle" required>
                </div>
                <div class="form-group">
                    <label for="goalType">Goal Type*</label>
                    <select id="goalType" required>
                        <option value="weekly">Weekly (7 days)</option>
                        <option value="monthly">Monthly (30 days)</option>
                        <option value="custom">Custom Duration</option>
                    </select>
                </div>
                <div class="form-group" id="customDaysGroup" style="display: none;">
                    <label for="goalCustomDays">Number of Days*</label>
                    <input type="number" id="goalCustomDays" min="1" max="365" value="7">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Goal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- App Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/state.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/habits.js"></script>
    <script src="js/events.js"></script>
    <script src="js/goals.js"></script>
    <script src="js/quotes.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/app.js"></script>
</body>

</html>